webpackJsonp([1],{"+E0w":function(t,e){},"/AQo":function(t,e){},"2N1Z":function(t,e){},"3xCF":function(t,e){},"4vXu":function(t,e){},CFVC:function(t,e){},E99Y:function(t,e){},MeA5:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i=n("zL8q"),a=n.n(i),r=n("UMRm"),s=n.n(r),c=n("urW8"),l=n.n(c),u=n("Dd8w"),d=n.n(u),p=n("NYxO"),g={name:"login",data:function(){return{loading:!1,loginForm:{login:"",password:""},rules:{login:{required:!0,message:"Введите логин",trigger:"blur"},password:{required:!0,message:"Введите пароль",trigger:"blur"}}}},methods:d()({},Object(p.b)(["login"]),{submitForm:function(t){var e=this,n=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,e.login(e.loginForm).then(function(){n.loading=!1},function(){e.loading=!1,e.$message({message:"Неверное имя пользователя или пароль",type:"error"})})})}})},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"600px",margin:"0 auto"}},[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("Авторизация")]),n("el-form",{ref:"loginForm",attrs:{model:t.loginForm,"status-icon":"status-icon",rules:t.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{prop:"login",label:"Логин"}},[n("el-input",{model:{value:t.loginForm.login,callback:function(e){t.$set(t.loginForm,"login",e)},expression:"loginForm.login"}})],1),n("el-form-item",{attrs:{prop:"password",label:"Пароль"}},[n("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("loginForm")}}},[t._v("Вход")])],1)],1)],1)},staticRenderFns:[]};var m=n("VU/8")(g,f,!1,function(t){n("2N1Z")},null,null).exports,h={name:"App",methods:d()({},Object(p.b)(["whoIAm","logout","getTransactions","getCategories","getMoneySources","getBalances"]),{toCategories:function(){this.$router.push("categories")},logoutAndDismiss:function(){this.logoutVisible=!1,this.logout()},changeRoute:function(t){this.$router.push({name:t.name})},fetchData:function(){var t=this;this.whoIAm().then(function(){t.loading=!1,t.logged&&(t.getBalances(),t.getCategories().then(function(){t.getTransactions(t.period).then(function(){t.loading=!1})}),t.getMoneySources())},function(){t.loading=!1})}}),computed:d()({},Object(p.c)(["logged","userName","balance","balanceBySources"])),data:function(){var t=new Date(Date.now());return{logoutVisible:!1,loading:!0,period:[new Date(Date.now()-27e8),t]}},created:function(){this.fetchData()},watch:{logged:function(){this.loading=!0,this.fetchData()}},components:{Login:m}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("el-header",[n("h1",{staticClass:"header-title"},[t._v("housekeeper")]),t.logged?n("div",{staticClass:"user-block"},[n("el-popover",{ref:"logout",attrs:{placement:"bottom-start",width:"50"},model:{value:t.logoutVisible,callback:function(e){t.logoutVisible=e},expression:"logoutVisible"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"text"},on:{click:t.logoutAndDismiss}},[t._v("Выйти")])],1),n("el-button",{directives:[{name:"popover",rawName:"v-popover",value:"logout",expression:"'logout'"}]},[t._v("вы вошли как:"),n("b",[t._v(" "+t._s(t.userName))])])],1):t._e()]),n("el-main",[t.logged?n("div",{staticClass:"content"},[n("el-tabs",{attrs:{value:t.$route.name},on:{"tab-click":t.changeRoute}},[n("el-tab-pane",{attrs:{label:"Транзакции",name:"book-keeping"}}),n("el-tab-pane",{attrs:{label:"Отчет",name:"report"}}),n("el-tab-pane",{attrs:{label:"Настройки",name:"settings"}})],1),n("el-card",[n("el-row",[n("el-col",{attrs:{sm:18}},[n("span",[t._v("Период:")]),t._v("   "),n("el-date-picker",{attrs:{format:"dd.MM.yyyy",type:"daterange"},on:{input:t.getTransactions},model:{value:t.period,callback:function(e){t.period=e},expression:"period"}})],1),n("el-col",{attrs:{sm:6}},[n("el-popover",{attrs:{placement:"left-start",trigger:"hover"}},[n("el-table",{attrs:{data:t.balanceBySources,border:"border","show-header":!1}},[n("el-table-column",{attrs:{width:"150",property:"title",label:"Источник"}}),n("el-table-column",{attrs:{width:"150",property:"amount",label:"Сумма"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{class:e.row.amount>0?"positive-amount":"negative-amount"},[t._v(" "+t._s(e.row.amount.toLocaleString())+" грн")])]}}])})],1),n("p",{staticStyle:{"line-height":"2"},attrs:{slot:"reference"},slot:"reference"},[t._v("Баланс:"),n("span",{class:t.balance>0?"positive-amount":"negative-amount"},[t._v(" "+t._s(t.balance.toLocaleString())+" грн")])])],1)],1)],1)],1),n("router-view",{staticClass:"margin-top-10"})],1):n("Login")],1)],1)},staticRenderFns:[]};var v=n("VU/8")(h,y,!1,function(t){n("cQ2l")},null,null).exports,b=n("/ocq"),E=n("woOf"),S=n.n(E),_=n("//Fk"),k=n.n(_),T={data:function(){return{entityForEdit:null,editModal:!1,rules:[]}},methods:{deleteEntity:function(t){return new k.a},sendEntity:function(t){},createNewEntity:function(){return{}},edit:function(t){var e={};t?S()(e,t):e=this.createNewEntity(),this.entityForEdit=e,this.editModal=!0},cancelEdit:function(){this.entityForEdit=null,this.editModal=!1},save:function(){var t=this;this.$refs.editForm.validate(function(e){if(!e)return t.$message({message:"Введите корректно все необходимые данные",type:"error"}),!1;t.sendEntity(t.entityForEdit),t.cancelEdit()})},remove:function(t){var e=this;this.$confirm("Удаление необратимо, Вы уверены что хотите удалить строку?","Внимание",{confirmButtonText:"Да",cancelButtonText:"Отмена",type:"warning"}).then(function(){e.deleteEntity(t).then(function(){e.$message({type:"success",message:"Строка удалена"})},function(){e.$message({type:"error",message:"Ошибка удаления"})})})}}},w=(n("4Cmz"),n("8dOo")),O=n.n(w),C={name:"numericInput",mixins:[i.Input],props:{positive:{type:Boolean,default:!0}},data:function(){return{muttableValue:this.value}},mounted:function(){var t=this;O()({groupSeparator:" ",autoGroup:!0,alias:"numeric",rightAlign:!1,removeMaskOnSubmit:!0,allowMinus:!0,allowPlus:!1,autounmask:!0,decimalProtect:!1,radixPoint:".",enforceDigitsOnBlur:!0}).mask(this.$refs.input);this.$refs.input.addEventListener("input",function(){t.mutableValue=parseFloat(this.inputmask.unmaskedvalue()),isNaN(t.mutableValue)&&(t.mutableValue=null),t.$emit("input",t.mutableValue)})}};var F={name:"book-keeping",mixins:[T],data:function(){return{rules:{categoryId:[{type:"number",required:!0,message:"Обязательно к заполнению",trigger:"blur"}],amount:[{type:"number",required:!0,message:"Обязательно к заполнению",trigger:"blur"}],date:[{type:"string",required:!0,message:"Обязательно к заполнению",trigger:"blur"}]}}},components:{NumericInput:n("VU/8")(C,null,!1,function(t){n("4vXu")},null,null).exports},computed:d()({},Object(p.c)(["transactions","categories","categoriesByType","tags","category","moneySources"])),methods:d()({},Object(p.b)(["createTransaction","updateTransaction","deleteTransaction"]),{createNewEntity:function(){return{categoryId:null,date:"",amount:null,note:null,moneySourceId:null}},deleteEntity:function(t){return this.deleteTransaction(t)},sendEntity:function(t){var e=this.category(t.categoryId);1===e.type&&t.amount>0&&(t.amount=-t.amount),2===e.type&&t.amount<0&&(t.amount=-t.amount),console.log(t.amount),t.id?this.updateTransaction(t):this.createTransaction(t)},getAmountCaption:function(t){return t.amount.toLocaleString()},getAmountClass:function(t){return t.amount<=0?"negative-amount":"positive-amount"}})},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-keeping"},[n("el-card",[n("el-row",[n("el-col",{attrs:{sm:12}},[t._v(" ")]),n("el-col",{attrs:{sm:12}},[n("el-button",{staticStyle:{float:"right"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(e){t.edit()}}},[t._v("Добавить транзакцию")])],1)],1),n("el-dialog",{attrs:{visible:t.editModal,width:"65%",title:"Транзакция"},on:{"update:visible":function(e){t.editModal=e}}},[t.editModal?n("el-form",{ref:"editForm",attrs:{inline:!0,model:t.entityForEdit,rules:t.rules,"label-position":"top"}},[n("el-form-item",{attrs:{label:"Категория",prop:"categoryId"}},[n("el-select",{attrs:{filterable:"filterable",placeholder:"Выбрать категорию"},model:{value:t.entityForEdit.categoryId,callback:function(e){t.$set(t.entityForEdit,"categoryId",e)},expression:"entityForEdit.categoryId"}},t._l(t.categoriesByType,function(e){return n("el-option-group",{key:e.title,attrs:{label:e.title}},t._l(e.categories,function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))}))],1),n("el-form-item",{attrs:{label:"Дата",prop:"date"}},[n("el-date-picker",{attrs:{placeholder:"Выбрать дату",format:"dd.MM.yyyy","value-format":"dd.MM.yyyy"},model:{value:t.entityForEdit.date,callback:function(e){t.$set(t.entityForEdit,"date",e)},expression:"entityForEdit.date"}})],1),n("el-form-item",{staticStyle:{width:"100px"},attrs:{label:"Сумма",prop:"amount"}},[n("numeric-input",{attrs:{placeholder:"Ввести сумму"},model:{value:t.entityForEdit.amount,callback:function(e){t.$set(t.entityForEdit,"amount",e)},expression:"entityForEdit.amount"}})],1),n("el-form-item",{attrs:{label:"Источник"}},[n("el-select",{model:{value:t.entityForEdit.moneySourceId,callback:function(e){t.$set(t.entityForEdit,"moneySourceId",e)},expression:"entityForEdit.moneySourceId"}},t._l(t.moneySources,function(t,e){return n("el-option",{key:e,attrs:{value:t.id,label:t.title}})}))],1),n("el-form-item",{attrs:{label:"Заметки",prop:"note"}},[n("el-input",{attrs:{placeholder:"Ввести заметку",maxlength:50},model:{value:t.entityForEdit.note,callback:function(e){t.$set(t.entityForEdit,"note",e)},expression:"entityForEdit.note"}})],1),n("el-button-group",{staticStyle:{"margin-top":"10px",float:"right"}},[n("el-button",{attrs:{type:"success"},on:{click:t.save}},[t._v("Сохранить")]),n("el-button",{on:{click:t.cancelEdit}},[t._v("Отменить")])],1),n("div",{staticStyle:{clear:"both"}})],1):t._e()],1),n("el-table",{attrs:{data:t.transactions}},[n("el-table-column",{attrs:{label:"Категория"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.category(e.row.categoryId).title))])]}}])}),n("el-table-column",{attrs:{prop:"date",label:"Дата"}}),n("el-table-column",{attrs:{label:"Сумма, грн"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{class:t.getAmountClass(e.row)},[t._v(t._s(t.getAmountCaption(e.row)))])]}}])}),n("el-table-column",{attrs:{label:"Заметки",prop:"note"}}),n("el-table-column",{attrs:{label:"Действия"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){t.edit(e.row)}}}),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(n){t.remove(e.row)}}})],1)]}}])})],1)],1)],1)},staticRenderFns:[]};var x=n("VU/8")(F,M,!1,function(t){n("TcSj")},null,null).exports,A={created:function(){this.getCategories(),this.getMoneySources()},computed:d()({},Object(p.c)(["categories","categoriesByType","moneySources"])),methods:d()({},Object(p.b)(["getCategories","getMoneySources"]))},R={name:"categories",mixins:[A,T],data:function(){return{entityForEdit:null,editModal:!1,rules:{type:[{type:"number",required:!0,message:"Обязательно к заполнению",trigger:"blur"}],title:[{type:"string",required:!0,message:"Обязательно к заполнению",trigger:"blur"}]}}},methods:d()({},Object(p.b)(["createCategory","updateCategory","deleteCategory"]),{deleteEntity:function(t){return this.deleteCategory(t)},sendEntity:function(t){t.id?this.updateCategory(t):this.createCategory(t)},createNewEntity:function(){return{title:"",icon:null,type:1,transit:0}}})},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{visible:t.editModal,width:"60%",title:"Категория"},on:{"update:visible":function(e){t.editModal=e}}},[t.editModal?n("el-form",{ref:"editForm",attrs:{inline:!0,model:t.entityForEdit,rules:t.rules,"label-position":"top"}},[n("el-form-item",{attrs:{label:"Тип",prop:"type"}},[n("el-select",{model:{value:t.entityForEdit.type,callback:function(e){t.$set(t.entityForEdit,"type",e)},expression:"entityForEdit.type"}},[n("el-option",{attrs:{label:"Расходы",value:1}}),n("el-option",{attrs:{label:"Доходы",value:2}})],1)],1),n("el-form-item",{attrs:{prop:"transit"}},[n("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.entityForEdit.transit,callback:function(e){t.$set(t.entityForEdit,"transit",e)},expression:"entityForEdit.transit"}},[t._v("Не учитывать в отчетах")])],1),n("el-form-item",{attrs:{label:"Название",prop:"title"}},[n("el-input",{attrs:{placeholder:"Введите название"},model:{value:t.entityForEdit.title,callback:function(e){t.$set(t.entityForEdit,"title",e)},expression:"entityForEdit.title"}})],1),n("el-form-item",{attrs:{label:"Действия"}},[n("el-button-group",[n("el-button",{attrs:{type:"success"},on:{click:t.save}},[t._v("Сохранить")]),n("el-button",{on:{click:t.cancelEdit}},[t._v("Отменить")])],1)],1)],1):t._e()],1),n("el-button",{staticStyle:{float:"right"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(e){t.edit()}}},[t._v("Добавить категорию")]),t._l(t.categoriesByType,function(e,o){return n("div",{key:o,staticStyle:{"margin-top":"20px"}},[n("h4",[t._v(t._s(e.title))]),n("el-table",{attrs:{data:e.categories}},[n("el-table-column",{attrs:{label:"Название",prop:"title"}}),n("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",[n("el-button",{attrs:{size:"mini"},on:{click:function(n){t.edit(e.row)}}},[t._v("Корректировать")]),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){t.remove(e.row)}}},[t._v("Удалить")])],1)]}}])})],1)],1)})],2)},staticRenderFns:[]};var N=n("VU/8")(R,I,!1,function(t){n("E99Y")},null,null).exports,D={name:"report",data:function(){return{yearMonth:new Date(Date.now()),transactionType:1,loading:!1}},computed:d()({},Object(p.c)(["incomes","expenses","categoriesByType","category","totalExpense","totalIncome","totalIncomeBySources","totalExpenseBySources","moneySource"]),{transactions:function(){return 1===this.transactionType?this.expenses:this.incomes},totalBySources:function(){return 1===this.transactionType?this.totalExpenseBySources:this.totalIncomeBySources},total:function(){return 1===this.transactionType?this.totalExpense:this.totalIncome},chartData:function(){var t=this,e=this.categoriesByType[1===this.transactionType?0:1].categories.map(function(t){return t.title}),n={};this.transactions.forEach(function(e){var o=t.category(e.categoryId);o.type!==t.transactionType||o.transit||(n[o.title]||(n[o.title]=0),n[o.title]+=e.amount)});var o=[];for(var i in n)o.push({name:i,value:n[i]});return{title:{text:"Отчет",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} грн ({d}%)"},legend:{orient:"vertical",data:e},series:[{name:"Расходы",type:"pie",radius:["50%","70%"],data:o}]}}})},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("el-row",[n("el-col",{attrs:{sm:12}},[n("el-select",{model:{value:t.transactionType,callback:function(e){t.transactionType=e},expression:"transactionType"}},[n("el-option",{attrs:{label:"Расходы",value:1}}),n("el-option",{attrs:{label:"Доходы",value:2}})],1)],1)],1),0===t.chartData.series[0].data.length?n("el-alert",{staticStyle:{"margin-top":"20px"},attrs:{type:"info",title:"Данные для отчета отсутствуют","show-icon":"show-icon",closable:!1}}):t._e(),t.transactions.length>0?n("div",[n("el-row",[n("el-col",{attrs:{sm:15}},[n("chart",{attrs:{options:t.chartData}})],1),n("el-col",{attrs:{sm:9}},[n("h2",[t._v(t._s(t.total.toLocaleString())+" грн")]),n("br"),t._l(t.totalBySources,function(e){return[n("h3",{staticClass:"source-report"},[t._v(t._s(e.title)+" : "+t._s(e.amount)+" грн")]),n("hr")]})],2)],1)],1):t._e()],1)],1)},staticRenderFns:[]};var B=n("VU/8")(D,U,!1,function(t){n("3xCF")},null,null).exports,$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-tabs",{attrs:{type:"border-card",value:this.$route.name},on:{"tab-click":this.changeRoute}},[e("el-tab-pane",{attrs:{label:"Настройки категорий",name:"categories"}},[e("router-view")],1),e("el-tab-pane",{attrs:{label:"Источники денег",name:"moneySources"}},[e("router-view")],1)],1)],1)},staticRenderFns:[]};var L=n("VU/8")({name:"settings",methods:{changeRoute:function(t){this.$router.push({name:t.name})}}},$,!1,function(t){n("CFVC")},null,null).exports,q={name:"moneySources",mixins:[A,T],data:function(){return{entityForEdit:null,editModal:!1,rules:{title:[{type:"string",required:!0,message:"Обязательно к заполнению",trigger:"blur"}]}}},methods:d()({},Object(p.b)(["createMoneySource","updateMoneySource","deleteMoneySource"]),{deleteEntity:function(t){return this.deleteMoneySource(t)},sendEntity:function(t){t.id?this.updateMoneySource(t):this.createMoneySource(t)},createNewEntity:function(){return{title:""}}})},G={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{visible:t.editModal,width:"60%",title:"Источник"},on:{"update:visible":function(e){t.editModal=e}}},[t.editModal?n("el-form",{ref:"editForm",attrs:{inline:!0,model:t.entityForEdit,rules:t.rules,"label-position":"top"}},[n("el-form-item",{attrs:{label:"Название",prop:"title"}},[n("el-input",{attrs:{placeholder:"Введите название"},model:{value:t.entityForEdit.title,callback:function(e){t.$set(t.entityForEdit,"title",e)},expression:"entityForEdit.title"}})],1),n("el-form-item",{attrs:{label:"Действия"}},[n("el-button-group",[n("el-button",{attrs:{type:"success"},on:{click:t.save}},[t._v("Сохранить")]),n("el-button",{on:{click:t.cancelEdit}},[t._v("Отменить")])],1)],1)],1):t._e()],1),n("el-button",{staticStyle:{float:"right"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(e){t.edit()}}},[t._v("Добавить источник")]),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-table",{attrs:{data:t.moneySources}},[n("el-table-column",{attrs:{label:"Название",prop:"title"}}),n("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",[n("el-button",{attrs:{size:"mini"},on:{click:function(n){t.edit(e.row)}}},[t._v("Корректировать")]),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){t.remove(e.row)}}},[t._v("Удалить")])],1)]}}])})],1)],1)],1)},staticRenderFns:[]};var z=n("VU/8")(q,G,!1,function(t){n("/AQo")},null,null).exports;o.default.use(b.a);var P,V,j=new b.a({routes:[{path:"/",name:"book-keeping",component:x},{path:"/report",name:"report",component:B},{path:"/settings",name:"settings",component:L,redirect:{name:"categories"},children:[{path:"/settings/categories",name:"categories",component:N},{path:"/settings/money-sources",name:"moneySources",component:z}]}]}),Y=(n("+E0w"),n("bOdI")),H=n.n(Y),W=n("gRE1"),K=n.n(W),Q=n("mtWM"),J=n.n(Q),X={get:function(t,e){var n=e.request,o=e.token;return this.request("get",t,{request:n,token:o})},post:function(t,e){var n=e.request,o=e.token;return this.request("post",t,{request:n,token:o})},patch:function(t,e){var n=e.request,o=e.token;return this.request("patch",t,{request:n,token:o})},delete:function(t,e){var n=e.request,o=e.token;return this.request("delete",t,{request:n,token:o})},request:function(t,e,n){var o=n.request,i=function(t,e){var n={baseURL:"http://f3mann-001-site1.dtempurl.com/api"};return t&&(n.headers={Authorization:"Bearer "+t}),J.a.create(n)}(n.token);return new k.a(function(n,a){i[t](e,o).then(function(t){return n(t)}).catch(function(t){return a(t)})})}},Z=n("mvHQ"),tt=n.n(Z),et=function(t){var e=tt()(t);return e=(e=e.replace(/(\w)(\w*)/g,function(t,e,n){return console.log(t),console.log(e),console.log(n),e.toUpperCase()+n})).replace(/(:Null)/g,":null"),console.log(e),t=JSON.parse(e)},nt="/bookkeeping/categories/",ot="/bookkeeping/moneysources/",it={state:{transactions:[],wallets:[],tags:[],categories:[],moneySources:[],balances:[],currentPeriod:null},getters:{transactions:function(t){return t.transactions},categories:function(t){return t.categories},moneySources:function(t){return t.moneySources},incomes:function(t){return t.transactions.filter(function(t){return t.amount>0})},expenses:function(t){return t.transactions.filter(function(t){return t.amount<0})},totalTransactionOf:function(t,e){return function(t){var n=0;return e[t].forEach(function(t){console.log(e.category(t.categoryId)),e.category(t.categoryId).transit||(n+=t.amount)}),n}},totalIncome:function(t,e){return e.totalTransactionOf("incomes")},totalExpense:function(t,e){return e.totalTransactionOf("expenses")},totalBySourceOf:function(t,e){return function(t){var n=[];return e[t].forEach(function(t){if(!e.category(t.categoryId).transit){var o=t.moneySourceId||0,i=n.find(function(t){return t.id===o});i||(i={id:o,title:o?e.moneySource(o).title:"Не определено",amount:0},n.push(i)),i.amount+=t.amount}}),n}},totalIncomeBySources:function(t,e){return e.totalBySourceOf("incomes")},totalExpenseBySources:function(t,e){return e.totalBySourceOf("expenses")},balance:function(t,e){var n=0;return e.balanceBySources.forEach(function(t){n+=t.amount}),n},balanceBySources:function(t,e){return t.balances},categoriesByType:function(t,e){return[{title:"Расходы",categories:e.getCategoryByType(1)},{title:"Доходы",categories:e.getCategoryByType(2)}]},getCategoryByType:function(t,e){return function(t){return e.categories.filter(function(e){return e.type===t})}},tags:function(t){return t.tags},category:function(t){return function(e){return t.categories.find(function(t){return t.id===e})}},moneySource:function(t){return function(e){return t.moneySources.find(function(t){return t.id===e})}}},actions:{get:function(t,e){var n=t.commit,o=(t.state,t.rootGetters),i=e.url,a=e.mutation;return new k.a(function(t,e){X.get(i,{token:o.token}).then(function(e){t(),n(a,{value:e.data})})})},create:function(t,e){var n=t.commit,o=(t.state,t.rootGetters),i=t.dispatch,a=e.url,r=e.mutation,s=e.entity,c=e.afterDispatch;X.post(a,{token:o.token,request:et(s)}).then(function(t){n(r,{value:t.data}),i(c)})},update:function(t,e){var n=t.commit,o=(t.state,t.rootGetters),i=e.url,a=e.mutation,r=e.entity;X.patch(i,{request:r,token:o.token}).then(function(t){n(a,{value:t.data})})},delete:function(t,e){var n=t.commit,o=(t.state,t.rootGetters),i=e.url,a=e.mutation,r=e.entity;return new k.a(function(t,e){X.delete(i,{token:o.token}).then(function(o){o.data?(t(),n(a,{value:r})):e(o.data)},function(t){return e(t)})})},getTransactions:function(t,e){var n=t.commit,o=t.rootGetters,i=null;if(e&&2===e.length){var a=e[0],r=a?"string"==typeof date?a:new Date(a.getFullYear(),a.getMonth(),a.getDate()).toDateString():"",s=e[1],c=s?"string"==typeof date?s:new Date(s.getFullYear(),s.getMonth(),s.getDate()).toDateString():"";i={dateFrom:r,dateTo:c}}return n("SET_CURRENT_PERIOD",{period:K()(i)}),new k.a(function(t,e){X.get("/bookkeeping/transactions",{token:o.token,request:{params:d()({},i)}}).then(function(e){t(),n("SET_TRANSACTIONS",{transactions:e.data})})})},createTransaction:function(t,e){var n=t.commit,o=t.state,i=t.rootGetters,a=t.dispatch;X.post("/bookkeeping/transactions/",{request:et(e),token:i.token}).then(function(t){n("CREATE_TRANSACTION",{transaction:t.data}),a("getTransactions",o.currentPeriod),a("getBalances",o.currentPeriod)})},updateTransaction:function(t,e){var n=t.commit,o=t.state,i=t.rootGetters,a=t.dispatch;X.patch("/bookkeeping/transactions/"+e.id,{request:e,token:i.token}).then(function(t){n("UPDATE_TRANSACTION",{transaction:e}),a("getBalances",o.currentPeriod)})},deleteTransaction:function(t,e){var n=t.commit,o=t.state,i=t.rootGetters,a=t.dispatch;X.delete("/bookkeeping/transactions/"+e.id,{token:i.token}).then(function(t){n("DELETE_TRANSACTION",{transaction:e}),a("getBalances",o.currentPeriod)})},getCategories:function(t){return(0,t.dispatch)("get",{url:nt,mutation:"SET_CATEGORIES"})},createCategory:function(t,e){(0,t.dispatch)("create",{url:nt,mutation:"CREATE_CATEGORY",entity:e,afterDispatch:"getCategories"})},updateCategory:function(t,e){(0,t.dispatch)("update",{url:nt+e.id,mutation:"UPDATE_CATEGORY",entity:e})},deleteCategory:function(t,e){return(0,t.dispatch)("delete",{url:nt+e.id,mutation:"DELETE_CATEGORY",entity:e})},getMoneySources:function(t){return(0,t.dispatch)("get",{url:ot,mutation:"SET_MONEYSOURCES"})},createMoneySource:function(t,e){(0,t.dispatch)("create",{url:ot,mutation:"CREATE_MONEYSOURCE",entity:e,afterDispatch:"getMoneySources"})},updateMoneySource:function(t,e){(0,t.dispatch)("update",{url:ot+e.id,mutation:"UPDATE_MONEYSOURCE",entity:e})},deleteMoneySource:function(t,e){return(0,t.dispatch)("delete",{url:ot+e.id,mutation:"DELETE_MONEYSOURCE",entity:e})},getBalances:function(t){return(0,t.dispatch)("get",{url:"/bookkeeping/balances/",mutation:"SET_BALANCES"})}},mutations:(P={},H()(P,"CREATE_TRANSACTION",function(t,e){e.transaction}),H()(P,"UPDATE_TRANSACTION",function(t,e){var n=e.transaction,o=t.transactions.find(function(t){return t.id===n.id});S()(o,n)}),H()(P,"DELETE_TRANSACTION",function(t,e){var n=e.transaction,o=t.transactions.findIndex(function(t){return t.id===n.id});t.transactions.splice(o,1)}),H()(P,"SET_TRANSACTIONS",function(t,e){var n=e.transactions;t.transactions=n}),H()(P,"SET_CATEGORIES",function(t,e){var n=e.value;t.categories=n}),H()(P,"CREATE_CATEGORY",function(t,e){e.value}),H()(P,"UPDATE_CATEGORY",function(t,e){var n=e.value;console.log(n);var o=t.categories.find(function(t){return t.id===n.id});S()(o,n)}),H()(P,"DELETE_CATEGORY",function(t,e){var n=e.value,o=t.categories.findIndex(function(t){return t.id===n.id});t.categories.splice(o,1)}),H()(P,"SET_CATEGORIES",function(t,e){var n=e.value;t.categories=n}),H()(P,"SET_CURRENT_PERIOD",function(t,e){var n=e.period;t.currentPeriod=n}),H()(P,"SET_MONEYSOURCES",function(t,e){var n=e.value;t.moneySources=n}),H()(P,"CREATE_MONEYSOURCE",function(t,e){e.value}),H()(P,"UPDATE_MONEYSOURCE",function(t,e){var n=e.value,o=t.moneySources.find(function(t){return t.id===n.id});S()(o,n)}),H()(P,"DELETE_MONEYSOURCE",function(t,e){var n=e.value,o=t.moneySources.findIndex(function(t){return t.id===n.id});t.moneySources.splice(o,1)}),H()(P,"SET_BALANCES",function(t,e){var n=e.value;t.balances=n}),P)},at={state:{session:{logged:!!localStorage.getItem("USER_TOKEN"),token:localStorage.getItem("USER_TOKEN"),user:{name:""}}},getters:{logged:function(t){return t.session.logged},token:function(t){return t.session.token},userName:function(t){return t.session.user.name}},actions:{login:function(t,e){t.state;var n=t.commit,o=t.dispatch,i={};return S()(i,e),new k.a(function(t,e){X.post("/auth/token",{request:i}).then(function(e){n("LOGIN_SUCCESS",{token:e.data.access_token}),o("whoIAm"),t(!0)}).catch(function(t){return e(t)})})},logout:function(t){t.state;(0,t.commit)("LOGOUT")},whoIAm:function(t){var e=t.state,n=t.commit,o=t.getters;return new k.a(function(t,i){o.logged?X.post("/auth/userinfo",{token:e.session.token}).then(function(e){t(),n("WHO_I_AM",{name:e.data})},function(t){i(t),401===t.response.status&&(console.log(t.response),n("LOGOUT"))}):t()})}},mutations:(V={},H()(V,"LOGIN",function(t){t.pending=!0}),H()(V,"LOGIN_SUCCESS",function(t,e){var n=e.token;t.session.logged=!0,t.session.token=n,localStorage.setItem("USER_TOKEN",n)}),H()(V,"LOGOUT",function(t){localStorage.removeItem("USER_TOKEN"),t.session.token=null,t.session.logged=!1}),H()(V,"WHO_I_AM",function(t,e){var n=e.name;t.session.user.name=n}),V)};o.default.use(p.a);var rt=new p.a.Store({modules:{bookKeeping:it,auth:at}}),st=n("Gu7T"),ct=n.n(st),lt=n("Icdr"),ut=n.n(lt),dt=n("O4Lo"),pt=n.n(dt),gt=n("472O"),ft=["legendselectchanged","legendselected","legendunselected","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected","click","dblclick","mouseover","mouseout","mousedown","mouseup","globalout"],mt={props:{options:Object,theme:[String,Object],initOptions:Object,group:String,autoResize:Boolean,watchShallow:Boolean},data:function(){return{chart:null}},computed:{width:{cache:!1,get:function(){return this.delegateGet("width","getWidth")}},height:{cache:!1,get:function(){return this.delegateGet("height","getHeight")}},isDisposed:{cache:!1,get:function(){return!!this.delegateGet("isDisposed","isDisposed")}},computedOptions:{cache:!1,get:function(){return this.delegateGet("computedOptions","getOption")}}},watch:{group:function(t){this.chart.group=t}},methods:{mergeOptions:function(t,e,n){this.delegateMethod("setOption",t,e,n)},appendData:function(t){this.delegateMethod("appendData",t)},resize:function(t){this.delegateMethod("resize",t)},dispatchAction:function(t){this.delegateMethod("dispatchAction",t)},convertToPixel:function(t,e){return this.delegateMethod("convertToPixel",t,e)},convertFromPixel:function(t,e){return this.delegateMethod("convertFromPixel",t,e)},containPixel:function(t,e){return this.delegateMethod("containPixel",t,e)},showLoading:function(t,e){this.delegateMethod("showLoading",t,e)},hideLoading:function(){this.delegateMethod("hideLoading")},getDataURL:function(t){return this.delegateMethod("getDataURL",t)},getConnectedDataURL:function(t){return this.delegateMethod("getConnectedDataURL",t)},clear:function(){this.delegateMethod("clear")},dispose:function(){this.delegateMethod("dispose")},delegateMethod:function(t){var e;if(this.chart){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return(e=this.chart)[t].apply(e,ct()(i))}o.default.util.warn("Cannot call ["+t+"] before the chart is initialized. Set prop [options] first.",this)},delegateGet:function(t,e){return this.chart||o.default.util.warn("Cannot get ["+t+"] before the chart is initialized. Set prop [options] first.",this),this.chart[e]()},init:function(){var t=this;if(!this.chart){var e=ut.a.init(this.$el,this.theme,this.initOptions);this.group&&(e.group=this.group),e.setOption(this.options,!0),ft.forEach(function(n){e.on(n,function(e){t.$emit(n,e)})}),this.autoResize&&(this.__resizeHandler=pt()(function(){e.resize()},100,{leading:!0}),Object(gt.a)(this.$el,this.__resizeHandler)),this.chart=e}},destroy:function(){this.autoResize&&Object(gt.b)(this.$el,this.__resizeHandler),this.dispose(),this.chart=null},refresh:function(){this.destroy(),this.init()}},created:function(){var t=this;this.$watch("options",function(e){!t.chart&&e?t.init():t.chart.setOption(t.options,!0)},{deep:!this.watchShallow});["theme","initOptions","autoResize","watchShallow"].forEach(function(e){t.$watch(e,function(){t.refresh()},{deep:!0})})},mounted:function(){this.options&&this.init()},activated:function(){this.autoResize&&this.chart&&this.chart.resize()},beforeDestroy:function(){this.chart&&this.destroy()},connect:function(t){"string"!=typeof t&&(t=t.map(function(t){return t.chart})),ut.a.connect(t)},disconnect:function(t){ut.a.disConnect(t)},registerMap:function(t,e,n){ut.a.registerMap(t,e,n)},registerTheme:function(t,e){ut.a.registerTheme(t,e)},graphic:ut.a.graphic},ht={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"echarts"})},staticRenderFns:[]};var yt=n("VU/8")(mt,ht,!1,function(t){n("MeA5")},null,null).exports;n("GbHy"),n("Vb+l"),n("Oq2I");o.default.component("chart",yt),l.a.use(s.a),o.default.config.productionTip=!1,o.default.use(a.a),new o.default({el:"#app",router:j,components:{App:v},template:"<App/>",store:rt})},TcSj:function(t,e){},cQ2l:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.95516c3ab1a64109e151.js.map